name: Share data between jobs

on: [push]

jobs:
  job_1:
    name: Add 3 and 7
    runs-on: ubuntu-latest
    steps:
      - shell: bash
        run: |
          expr 3 + 7 > math-homework.txt
      - name: Upload math result for job 1
        uses: actions/upload-artifact@v3
        with:
          name: homework
          path: math-homework.txt

  job_2:
    name: Multiply by 9
    needs: job_1
    runs-on: ubuntu-latest
    steps:
      - name: Download math result for job 1
        uses: actions/download-artifact@v3
        with:
          name: homework
      - shell: bash
        run: |
          value=`cat math-homework.txt`
          expr $value \* 9 > math-homework.txt
      - name: Upload math result for job 2
        uses: actions/upload-artifact@v3
        with:
          name: homework
          path: math-homework.txt

  job_3:
    name: Display results
    needs: [job_1,job_2]
    runs-on: ubuntu-latest
    steps:
      - name: Checkout files
        uses: actions/checkout@v3
      - name: Download math result for job 2
        uses: actions/download-artifact@v3
        with:
          name: homework
      - name: Print the final result
        run: |
          value=`cat math-homework.txt`
          echo The result is $value
          ls dolphin*
          echo "### Bench complete :rocket:" >> $GITHUB_STEP_SUMMARY 
          echo "![foo](dolphin.jpg)" >> $GITHUB_STEP_SUMMARY 
          echo "<div><img width='16' height='16' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABoVBMVEX///8AAACxsbD6+fnz8O7Dw8NTU1P6+vqTk5Pg4OCmpqb//v339PPu7e3Z2NiDg4PX19b//vzs6ejb29t2dnbT0tJbW1vv7ez49PP9+vnFxcW0s7KYl5fz8O759vX7+Pdvb2/s6ef6+fmjoqITExO0s7L5+fnCwcE0NDSlpaT8+vqIh4f8+/rGxsVycnL9+fj9+vlvb2/KycmdnJxmZmbt7Ov//Pp8fHxhYWHh39+GhobJyMggICBMTEyamZnMysnm4uH08O/l4uGtrKwzNDRt0vxz1Pxs0vz///9u0/x41vxx1Pyl5f+m5v911fzT8//q+P6o5Pyv6P+R3f191/zk+f/H7/+r5v5k0Pyn5f/9/Pvf9//z/P/2/P9/2Pzy/v/Z9v/h+P9w0/xx0/yF2v2M3P2L3P2J2/2S3f3f+P/v+v656v3r+P6u5/3n9//4/f/h9v/5/f971vx21fz9//+46/+B2P3I8P9p0fzQ8//f9v/e9v/s+//W9P/b9v/U8/9kz/z9/Pxq0fxy1Px51vyA2PyA2P256v6n5v/Y9v9y0/wF5otQAAAARXRSTlMAAFb82oUI/RcGPvOzpW0NiP3JdQyTBK7k8gRXYMSv80TO+5kLVvyvF0r5LO5uI+HnMZReJM76TzTGP7kVG3i/1tvWoiv+MaEhAAAA30lEQVR4XkXN03YEQQBF0apkbE9o2zZKPbYV27b11elKZ1bO4364FwCoMtVbrDYoBQBQ6GkqQuX/oNFG8fF9WSdUV0hQqXRfPn+Yq2t0ToORQ0npJ2GBw8L1zS21OyRA2CsIwkn4qnyiCC4m9uh+qvqDl9e3bDa8+lVbV9zY2971+9MNjU0iNLd4CNqhvNY2/tLeESQstH+QyRx1dXPo6b37Xl55X1vf2Nzq6xcBDtAYYQwhFE8kBzkMDZ+enWOMXd6LkVEOcGyc5vK+B1+BTk79ApyemZ2TyeYXFpcg+AHaODSFYI9kzQAAAABJRU5ErkJggg%3D%3D'/></div>" >> $GITHUB_STEP_SUMMARY 
